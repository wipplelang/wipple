[[no-std]]

use "iterate"
use "fp"

instance (Iterate Text Text) : text -> \
  Iterate (intrinsic "text-characters" text :: List Text)

instance (Collect Text Text) : iterator -> {
  text : mutable ""
  repeat {
    when (next iterator) {
      Some c -> {
        text . set! (format "__" (get text) c)
        Continue
      }
      None -> Break ()
    }
  }

  get text
}

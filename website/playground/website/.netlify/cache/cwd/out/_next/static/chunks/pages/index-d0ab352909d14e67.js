(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5075)}])},5075:function(e,t,n){"use strict";n.r(t);var r=n(5666),i=n.n(r),o=n(5893),a=n(7294),s=n(5884),l=n(9604);function u(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}t.default=function(){var e=(0,a.useState)(),t=e[0],r=e[1];(0,a.useEffect)((function(){var e;(e=i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(189).then(n.bind(n,5189));case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){u(o,r,i,a,s,"next",e)}function s(e){u(o,r,i,a,s,"throw",e)}a(void 0)}))})()}),[]);var c=(0,a.useRef)(null),d=(0,a.useState)(0),f=d[0],g=d[1],h=(0,a.useState)(0),p=h[0],v=h[1];(0,a.useEffect)((function(){var e,t;g(window.innerHeight),v(null!==(t=null===(e=c.current)||void 0===e?void 0:e.clientHeight)&&void 0!==t?t:0)}),[c]);var m=f-p-32,w=(0,a.useRef)(null),y=(0,a.useState)(0),b=y[0],x=y[1],S=(0,a.useState)(0),k=S[0],N=S[1],j=function(){var e,t;x(window.innerWidth),N(null!==(t=null===(e=w.current)||void 0===e?void 0:e.clientWidth)&&void 0!==t?t:0)};(0,a.useEffect)(j,[w]);var E=b-k-64,P=(0,a.useState)(),_=P[0],M=P[1];(0,a.useEffect)((function(){return M(new URLSearchParams(window.location.search))}),[]);var C=(0,l.Ik)(),T=(0,a.useState)(null),z=T[0],W=T[1],H=(0,a.useState)(),L=H[0],R=H[1];return(0,a.useEffect)((function(){if(C){C.languages.register({id:"wipple"}),C.languages.setLanguageConfiguration("wipple",{wordPattern:/[^\n\t \(\)\[\]\{\}'"]+/,brackets:[["(",")"],["[","]"],["{","}"]],autoClosingPairs:[{open:"(",close:")"},{open:"[",close:"]"},{open:"{",close:"}"},{open:'"',close:'"'}]}),C.languages.setMonarchTokensProvider("wipple",{tokenizer:{root:[[/'/,"delimiter"],[/[()\[\]{}]/,"@brackets"],[/--.*/,"comment"],[/"[^"\\]*(\\.[^"\\]*)*"/s,"string"],[/[0-9]+(\.[0-9]+)?(?=[\n\t \(\)\[\]\{\}'"]|$)/,"number"],[/[`~!@#$%^&*-_=+\\|;:,<.>/?]+(?=[\n\t \(\)\[\]\{\}'"]|$)/,"operator"],[/[^\n\t \(\)\[\]\{\}'"]+/,"identifier"]]}}),C.editor.defineTheme("wipple",{base:"vs",inherit:!0,rules:[{token:"comment",foreground:"#408080",fontStyle:"italic"},{token:"string",foreground:"#40a070"},{token:"number",foreground:"#40a070"},{token:"operator",foreground:"#0086b3"}],colors:{}}),C.editor.setTheme("wipple");var e=C.editor.getModels()[0];W(e);var n=function(){var n=e.getValue();if(_){_.set("code",n);var r=window.location.pathname+"?"+_.toString();window.history.replaceState(null,"",r)}t&&R(t.run(n))};e.onDidChangeContent(function(e,t){var n;return function(){clearTimeout(n),n=setTimeout(e,t())}}(n,(function(){return Math.min(20*e.getValue().split("\n").length,1e3)}))),n()}}),[C]),(0,a.useEffect)((function(){if(C&&z){var e=function(e,t){switch(e){case"Primary":switch(t){case"Note":return C.MarkerSeverity.Hint;case"Warning":return C.MarkerSeverity.Warning;case"Error":return C.MarkerSeverity.Error}case"Secondary":return C.MarkerSeverity.Hint}},t=null===L||void 0===L?void 0:L.diagnostics.flatMap((function(t){return t.notes[0].message="".concat(t.message,": ").concat(t.notes[0].message),t.notes.map((function(n){var r=z.getPositionAt(n.span.start),i=z.getPositionAt(n.span.end);return{startLineNumber:r.lineNumber,startColumn:r.column,endLineNumber:i.lineNumber,endColumn:i.column,message:n.message,severity:e(n.level,t.level)}}))}));C.editor.setModelMarkers(z,"wipple",null!==t&&void 0!==t?t:[])}}),[z,L]),(0,o.jsxs)("div",{className:"flex flex-col bg-gray-50",style:{height:"100%"},children:[(0,o.jsxs)("div",{className:"flex items-center justify-between flex-grow-0 p-4 pb-0",ref:c,children:[(0,o.jsx)("a",{href:"https://wipple.gramer.dev",children:(0,o.jsx)("img",{src:"/images/logo.svg",alt:"Wipple Playground",className:"h-10"})}),(0,o.jsxs)("div",{className:"flex gap-4 text-gray-500",children:[(0,o.jsx)("a",{href:"https://docs.wipple.gramer.dev",children:"Docs"}),(0,o.jsx)("a",{href:"https://github.com/wipplelang/wipple",children:"GitHub"})]})]}),(0,o.jsx)("div",{className:"flex-grow",children:(0,o.jsxs)(s.Z,{className:"bg-gray-50",style:{height:f-p},primary:"second",defaultSize:"40%",resizerClassName:"w-4",resizerStyle:{height:m},onChange:j,children:[(0,o.jsx)("div",{className:"m-4 mr-0 p-2 rounded-md bg-white",style:{height:m},children:(0,o.jsx)(l.ZP,{width:E,height:"100%",language:"wipple",defaultValue:(null===_||void 0===_?void 0:_.get("code"))||"-- Write your code here!",options:{fontFamily:"JetBrains Mono",fontLigatures:!0,fontSize:16,minimap:{enabled:!1},tabSize:2,insertSpaces:!1}})}),(0,o.jsx)("div",{ref:w,className:"m-4 ml-0 p-2 rounded-md bg-white",style:{height:m},children:null===L||void 0===L?void 0:L.output})]})})]})}}},function(e){e.O(0,[774,605,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);